var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,n=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&i(e,a,t[a]);return e},o=(e,r)=>t(e,a(r));import{a as u,_ as c,d as p}from"./TagList.37334d45.js";import{h as m,t as d,m as g,U as f,a4 as v,X as y,a1 as b,r as q,o as j,d as O,w as h,i as w,e as _,f as k,k as L,u as P,a2 as C,a3 as Y}from"./vendor.d5b88c84.js";import{b as D}from"./article.c8400a35.js";const x={class:"tag-list"};var H=m({props:{query:{type:null,required:!0},request:{type:Function,required:!1,default:D}},emits:["tag-click"],setup(e,{emit:t}){const a=e,r=e=>o(n({},e),{timeLabel:p(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")}),{query:s}=d(a),l=C(),i=Y(),m=g([]),D=g(!0),H=f((()=>({spinning:D.value,tip:"Loading...",wrapperClassName:D.value?"list-loading":""}))),I=v({onChange:e=>I.current=e,pageSize:10,total:0,current:Number(l.query.page||1)});y((()=>I.current),(e=>{i.push({query:o(n({},l.query),{page:e})})})),y([s,a.request],(()=>{I.total=0,I.current=1}),{deep:!0}),b((async()=>{m.value=[],D.value=!0;const e=n({offset:10*(I.current-1),limit:10},s.value);""===e.tag&&delete e.tag;const t=await a.request(e);D.value=!1,m.value=t.articles.map(r),I.total=t.articlesCount}));const M=function(e){m.value=m.value.map((t=>t.slug===e.slug?r(e):t))},N=function(e){t("tag-click",e)};return(e,t)=>{const a=q("router-link"),r=q("a-avatar"),s=q("a-list-item-meta"),l=q("a-list-item"),i=q("a-list");return j(),O(i,{"item-layout":"vertical",pagination:P(I),"data-source":m.value,loading:P(H)},{renderItem:h((({item:e})=>[w(l,{key:e.title},{extra:h((()=>[w(u,{article:e,onUpdate:M},null,8,["article"])])),actions:h((()=>[_("div",x,[w(c,{"tag-list":e.tagList,onClick:N},null,8,["tag-list"])])])),default:h((()=>[w(s,{style:{"align-items":"center"},description:e.timeLabel},{title:h((()=>[w(a,{to:`/user/${e.author.username}`},{default:h((()=>[k(L(e.author.username),1)])),_:2},1032,["to"])])),avatar:h((()=>[w(r,{class:"a123",src:e.author.image},null,8,["src"])])),_:2},1032,["description"]),_("h1",null,[w(a,{to:`/article/${e.slug}`},{default:h((()=>[k(L(e.title),1)])),_:2},1032,["to"])]),_("span",null,L(e.description),1)])),_:2},1024)])),_:1},8,["pagination","data-source","loading"])}}});export{H as _};
