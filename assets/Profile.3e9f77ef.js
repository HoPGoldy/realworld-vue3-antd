var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,s=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r;import{l as u,u as i,s as n}from"./index.10a24596.js";import{h as d,W as m,m as p,X as c,r as v,o as b,d as f,w as g,i as w,u as y,aa as h,f as _,a3 as j}from"./vendor.d5b88c84.js";import{u as O,_ as U}from"./useForm.fca88376.js";import"./reactivity.esm-bundler.9bcfc38b.js";import"./useLoding.b25ee3b2.js";const k=_("Your Settings"),P=_(" Update Setting "),S=_(" Or click here to logout ");var x=d({setup(e){const d=m(u,p(void 0)),_=j(),x=m(n,(()=>{throw new Error("Profile 中找不到 setLoginInfo")})),E=p({username:"",password:"",email:"",bio:"",image:""}),{onSubmit:I,validateInfos:q,errorMsg:C,submiting:L}=O(E,p({username:[{required:!0,trigger:"change"}],password:[{required:!0,trigger:"change"}],email:[{required:!0,trigger:"change"}]}),(async e=>{const a=await i(e);x(a),_.replace(`/user/${a.username}`)}));c(d,(e=>{var u;e&&(E.value=(u=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(r)for(var l of r(a))t.call(a,l)&&s(e,l,a[l]);return e})({},e),a(u,l({password:""}))))}),{immediate:!0});const R=()=>{localStorage.removeItem("token"),x(void 0),_.push("/home")};return(e,a)=>{const l=v("a-typography-title"),r=v("a-input"),o=v("a-form-item"),t=v("a-textarea"),s=v("a-input-password"),u=v("a-form"),i=v("a-button"),n=v("a-card"),d=v("a-col"),m=v("a-row");return b(),f(m,{type:"flex",justify:"center"},{default:g((()=>[w(d,{md:12,xs:24,style:{"margin-top":"1em"}},{default:g((()=>[w(n,{bordered:!1},{title:g((()=>[w(l,null,{default:g((()=>[k])),_:1})])),default:g((()=>[w(U,{"error-msg":y(C)},null,8,["error-msg"]),w(u,{"label-col":{span:5},"label-align":"left"},{default:g((()=>[w(o,{label:"Avatar"},{default:g((()=>[w(r,{value:E.value.image,"onUpdate:value":a[0]||(a[0]=e=>E.value.image=e),placeholder:"URL of profile picture"},null,8,["value"])])),_:1}),w(o,h(y(q).username,{label:"Username"}),{default:g((()=>[w(r,{value:E.value.username,"onUpdate:value":a[1]||(a[1]=e=>E.value.username=e),placeholder:"Username"},null,8,["value"])])),_:1},16),w(o,{name:"bio",label:"Short bio"},{default:g((()=>[w(t,{value:E.value.bio,"onUpdate:value":a[2]||(a[2]=e=>E.value.bio=e),placeholder:"Short bio about you","auto-size":{minRows:3}},null,8,["value"])])),_:1}),w(o,h(y(q).email,{label:"Email"}),{default:g((()=>[w(r,{value:E.value.email,"onUpdate:value":a[3]||(a[3]=e=>E.value.email=e),placeholder:"Email"},null,8,["value"])])),_:1},16),w(o,h(y(q).password,{label:"Password"}),{default:g((()=>[w(s,{value:E.value.password,"onUpdate:value":a[4]||(a[4]=e=>E.value.password=e),placeholder:"New Password"},null,8,["value"])])),_:1},16)])),_:1}),w(i,{loading:y(L),type:"primary",block:"",onClick:y(I)},{default:g((()=>[P])),_:1},8,["loading","onClick"]),w(i,{style:{"margin-top":"1em"},type:"link",block:"",onClick:R},{default:g((()=>[S])),_:1})])),_:1})])),_:1})])),_:1})}}});export{x as default};
