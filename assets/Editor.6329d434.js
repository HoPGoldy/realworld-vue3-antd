import{h as e,m as a,ac as t,U as l,r,o as i,d as s,w as o,i as u,f as n,k as d,u as c,aa as p,a3 as g,a2 as m,ad as v}from"./vendor.d5b88c84.js";import{d as f,e as b,g as h}from"./article.c8400a35.js";import{u as y,_}from"./useForm.fca88376.js";import"./index.10a24596.js";import"./reactivity.esm-bundler.9bcfc38b.js";import"./useLoding.b25ee3b2.js";const k=n(" Publish Article ");var w=e({async setup(e){let v,w;const j=g(),{editSlug:x,isCreatePage:C}=function(){const e=m().params.id,a=l((()=>!e));return{editSlug:e,isCreatePage:a}}(),U=a({title:"",description:"",body:"",tagList:[]}),L=a({title:[{required:!0,trigger:"change"}],body:[{required:!0,trigger:"change"}],description:[{required:!0,trigger:"change"}]}),{onSubmit:q,validateInfos:A,errorMsg:P,submiting:S}=y(U,L,(async e=>{const a=C.value?await f(e):await b(x,e);j.push(`/article/${a.slug}`)}));if(!C.value){const e=([v,w]=t((()=>h(x))),v=await v,w(),v);U.value=e}const V=l((()=>C.value?"New Article":U.value.title));return(e,a)=>{const t=r("a-typography-title"),l=r("a-input"),g=r("a-form-item"),m=r("v-md-editor"),v=r("a-select"),f=r("a-form"),b=r("a-button"),h=r("a-card");return i(),s(h,{bordered:!1},{title:o((()=>[u(t,null,{default:o((()=>[n(d(c(V)),1)])),_:1})])),default:o((()=>[u(_,{"error-msg":c(P)},null,8,["error-msg"]),u(f,{"label-col":{span:3},"label-align":"right"},{default:o((()=>[u(g,p(c(A).title,{label:"Title"}),{default:o((()=>[u(l,{value:U.value.title,"onUpdate:value":a[0]||(a[0]=e=>U.value.title=e),placeholder:"Article Title"},null,8,["value"])])),_:1},16),u(g,p(c(A).description,{label:"Description"}),{default:o((()=>[u(l,{value:U.value.description,"onUpdate:value":a[1]||(a[1]=e=>U.value.description=e),placeholder:"What's this article about?"},null,8,["value"])])),_:1},16),u(g,p(c(A).body,{label:"Content"}),{default:o((()=>[u(m,{modelValue:U.value.body,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.body=e),height:"400px",placeholder:"Write your article (in markdown)"},null,8,["modelValue"])])),_:1},16),u(g,{label:"tags"},{default:o((()=>[u(v,{value:U.value.tagList,"onUpdate:value":a[3]||(a[3]=e=>U.value.tagList=e),mode:"tags","token-separators":[",","ï¼Œ"],open:!1,placeholder:"Enter tags, split with comma"},null,8,["value"])])),_:1})])),_:1}),u(b,{loading:c(S),type:"primary",block:"",onClick:c(q)},{default:o((()=>[k])),_:1},8,["loading","onClick"])])),_:1})}}}),j=e({setup:e=>(e,a)=>{const t=r("a-skeleton"),l=r("a-col"),n=r("a-row");return i(),s(n,{type:"flex",justify:"center"},{default:o((()=>[u(l,{md:14,xs:24,style:{"margin-top":"1em"}},{default:o((()=>[(i(),s(v,null,{default:o((()=>[u(w)])),fallback:o((()=>[u(t,{active:""})])),_:1}))])),_:1})])),_:1})}});export{j as default};
